<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>tt.fsp — Tomatonator Thrower</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="icon" href="icon.png">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  user-select:none;
  -webkit-user-select:none;
  touch-action:none;
}

body{
  background:#7F7F7F;
  font-family:Arial, Helvetica, sans-serif;
  overflow:hidden;
}

/* TOP BAR */
.topbar{
  height:48px;
  background:#8A8A8A;
  display:flex;
  align-items:center;
  gap:16px;
  padding:0 12px;
}

.topbar img{
  height:28px;
}

.nav span{
  cursor:pointer;
  font-size:14px;
}

/* CONTENT */
.content{
  position:relative;
  width:100vw;
  height:calc(100vh - 48px);
}

.mode{
  position:absolute;
  inset:0;
  display:none;
}

.mode.active{
  display:block;
}

/* VISUAL */
#template{
  position:absolute;
  inset:0;
  background:url("template.png") center no-repeat;
  background-size:320px auto;
  opacity:0.6;
  pointer-events:none;
}

.tomato{
  position:absolute;
  width:220px; /* BEM MAIOR */
  pointer-events:none;
}

/* PANELS */
.panel{
  padding:16px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="topbar">
  <img src="icon.png">
  <div class="nav">
    <span data-mode="visual">Visual</span>
    <span data-mode="editor">Editor</span>
    <span data-mode="about">About</span>
  </div>
</div>

<div class="content">

  <div id="visual" class="mode active">
    <div id="template"></div>
  </div>

  <div id="editor" class="mode panel">
    <b>Editor</b><br>
    BGM allowed here.
  </div>

  <div id="about" class="mode panel">
    <b>tt.fsp — Fire Source Project</b><br><br>

    <b>what's is this for?</b><br>
    it's an web html where it makes the "Tomato Throw meme" easier to recreate ig.<br><br>

    <b>why did u make this html?</b><br>
    just for fun.<br><br>

    <b>what's fsp?</b><br>
    fsp stands for Fire-Source-Project.
  </div>

</div>

<audio id="bgm" src="bgm.ogg" loop></audio>

<script>
const modes = document.querySelectorAll(".mode");
const visual = document.getElementById("visual");
const bgm = document.getElementById("bgm");

function setMode(name){
  modes.forEach(m => m.classList.remove("active"));
  document.getElementById(name).classList.add("active");

  document.querySelectorAll(".tomato").forEach(t => t.remove());

  if(name === "editor" || name === "about"){
    bgm.play().catch(()=>{});
  }else{
    bgm.pause();
    bgm.currentTime = 0;
  }
}

document.querySelectorAll(".nav span").forEach(btn=>{
  btn.onclick = ()=> setMode(btn.dataset.mode);
});

function playSplash(){
  const s = new Audio("splash.ogg");
  s.play().catch(()=>{});
}

function spawnTomato(x,y){
  const img = document.createElement("img");
  img.src = "tomato.gif";
  img.className = "tomato";
  img.style.left = (x - 110) + "px";
  img.style.top  = (y - 110) + "px";
  visual.appendChild(img);

  /* FREEZE NO ÚLTIMO FRAME */
  setTimeout(()=>{
    const src = img.src;
    img.src = "";
    img.src = src;
    playSplash();
  }, 900);
}

visual.addEventListener("pointerdown", e=>{
  spawnTomato(e.clientX, e.clientY);
});

visual.addEventListener("pointermove", e=>{
  if(e.buttons){
    spawnTomato(e.clientX, e.clientY);
  }
});
</script>

</body>
</html>
